@using com.Sconit.Web.Models.SearchModels.MRP
@Html.Partial("_AjaxMessage")
<script type="text/javascript">
    function onSearch() {
        if ($('#Flow').val() == "") {
            $message.error('路线不能为空。');
            return;
        }
        if ($('#PlanVersion').val() == "") {
            $message.error('计划版本不能为空。');
            return;
        }
        if ($('#DateIndex').val() == "") {
            $message.error('时间索引周不能为空。');
            return;
        }
    }

    function DateIndex_DataBinding(e) {
        e.data = {
            dateType: 5
        }
    }
</script>
<div class="search-label">
    <label>
        @Resources.MRP.MrpExSectionPlan.MrpExSectionPlan_PlanVersion
    </label>
</div>
<div class="search-field">
    @{
        Html.RenderAction("_MrpPlanMasterComboBox", "Common", new
         {
             controlName = "PlanVersion",
             resourceGroup = com.Sconit.CodeMaster.ResourceGroup.EX,
             selectedValue = TempData["MrpPlanExSearchModel"] != null ? ((MrpPlanExSearchModel)TempData["MrpPlanExSearchModel"]).PlanVersion : string.Empty
         });
    }
</div>
<div class="editor-label-2">
    <label>
        @Resources.MRP.MrpExSectionPlan.MrpExSectionPlan_DateIndex
    </label>
</div>
<div class="editor-field-2">
    @{
        Html.RenderAction("_DateIndexComboBox", "Common", new
        {
            includeBlankOption = true,
            controlName = "DateIndex",
            dateType = (int)com.Sconit.CodeMaster.TimeUnit.Week,
            selectedValue = TempData["MrpPlanExSearchModel"] != null ? ((MrpPlanExSearchModel)TempData["MrpPlanExSearchModel"]).DateIndex : string.Empty
        });
    }
</div>
<div class="editor-label-2">
    <label>
        @Resources.MRP.MrpExSectionPlan.MrpExSectionPlan_ProductLine
    </label>
</div>
<div class="editor-field-2">
    @{
        Html.RenderAction("_FlowComboBox", "Common", new
        {
            controlName = "Flow",
            type = (int)com.Sconit.CodeMaster.OrderType.Production,
            isChange = false,
            isCreateOrder = false,
            resourceGroup = (int)com.Sconit.CodeMaster.ResourceGroup.EX,
            selectedValue = TempData["MrpPlanExSearchModel"] != null ? ((MrpPlanExSearchModel)TempData["MrpPlanExSearchModel"]).Flow : string.Empty,
            isMrp = true
        });
    }
</div>
